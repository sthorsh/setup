BASH INTERN PIPELINE

Inputprosessor
  Leser tegn fra terminalen, fil eller streng
  Readline leser tegn-for-tegn fra terminalen
  Readline bufrer tegn til mottak av en newline
  Output: strøm av tegn (for _en_ kommandolinje)

Lexer
  Tokeniserer linjen
  Klassifiserer tokens (escape- og sitattegn)
  Ekspanderer history events
  Ekspanderer alias
  Output: strøm av tokens (ord og operatorer)

Parser
  Verifiserer input eller rapporterer syntaksfeil
  Bygger opp en datastruktur for kommandoen (command structure)
  Output: command structure

Makroprosessor
  Ekspanderer braces
  Ekspanderer tilde
  Ekspanderer params
  Substituerer kommando
  Ekspanderer aritmetiske expr
  Substituerer prosess
  Deler ord
  Ekspanderer filnavn
  Fjerner escape- og sitattegn
  Output: command structure

Kjøresystem
  Utfører omdirigeringer
  Ekspanderer og tilordner variabelverdier
  Antar første ord er navn, resten er args
  Hvis navn ikke inneholder /
    • Hvis match, kjører funksjon
    • Hvis match, kjører builtin
    • Søker i path etter _kjørbar_ fil
  Hvis navn inneholder /, eller path-søk OK
    • Kjører fil i separat kjøremiljø
    • Bash gjør fork()
    • Bash gjør wait()
    • Barneprosess gjør exec()
    • Barneprosess gjør exit()
  Bash kan kjøre ikke-kjørbare script som $ bash name
    • Søker i . etter script
    • Søker i path etter script
    • Hvis treff: kjører script
  Feiler med "command not found"

Outputprosessor
  Opphever omdirigeringer
  Beregner exit/return status 0..255
  Eksponerer exit/return status i $?

