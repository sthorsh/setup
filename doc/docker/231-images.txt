IMAGES

Image
  Image_id: sha256:36304d3b4540
  Repository: redis
  Tag: latest
  Size: 6927
  Content hash: sha256:d27740b5bd12 (digest)
  Layers: [sha256:afb6ec6fdc1c, ...] (stack)

Stack
  Et image fremstår flatt
  Et image består av N lag
  Hvert lag er read-only (RO)
  Hvert lag er uavhenig av andre lag
  Øvre lag: app, cfg, deps, libs, ...
  Nederste lag: OS minus kernel (base layer)

Storage driver
  Holder lagene sammen
  Cf /var/lib/docker/overlay2/

  Lag
    Hvert lag har a bunch of files and stuff inside
    Hvert lag har en layer_id (digest sha256)
    Hvert lag i host_fs: /var/lib/docker/overlay2/layer_dir/diff/layer_fs
    Problem: layer_id != layer_dir
    Layer_id: $ docker pull image or $ docker manifest inspect image -v
  
  Layer "id"
    Layer ID: docker manifest inspect && pull complete
    Content hash: docker inspect image_id
    Directory name: /var/lib/docker/overlay2/<name>/
  
  Filsystemet
      Applikasjonen
      Konfigurasjon etc
      Biblioteker: java, node (kun runtime-deps)
      OS: filer, libs, shared objects, ... (kun runtime-deps)

*===================================
Register
  On-premise eller cloud
  Local-dr-dtr-dh, ...
  Pull: fra register (ned)
  Push: til register (opp)

Docker registry REST API
  https://docs.docker.com/registry/spec/api/

Image register
  Privat: docker registry
  Public: docker hub

Docker Hub image repository
  Root: busybox
  User: sthorsh/myimage
  Privat
  Public: busybox

Docker hub levels
  Top level images: image_name
  Second level images: namespace/image_name

