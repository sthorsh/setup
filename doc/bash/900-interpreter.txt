PIPELINE

GNU readline library
  Leser tegn fra terminalen
  En <newline> markerer EOL (en terminator)
  Output: en kommandolinje (en sekvens med tegn)

GNU history library
  Ekspanderer !
  Skriver til ~/.bash_history
  Output: en kommandolinje (en sekvens med tegn)

Lexer
  Fjerner \<newline> (↱)
  Splitter input i tokens
    • newline → token delimiter (discarded)
    • part of op
    • op delimiter
    • \ ' " → start quote
    • $ ${ $( $(( → start param exp
    • start op → token delimiter
    • space tab → token delimiter (discarded)
    • part of word
    • # → start comment (discarded)
    • start new word
  Klassifiserer tokens: type  
  Evt evaluerer tokens: verdi
  Sjekk 1st token: opening keyword (↱)
  Sjekk 1st token: alias → expand (↱)
  Output: en kommandolinje (en sekvens med tokens)
  
  Parser (Bison)
    Parser tokens (AST)
    Kaster evt syntaksfeil
    Bygger en «command structure» (datastruktur)
    Output: en kommandolinje (command structure)
  
  Makroprosessor
    Ekspanderer braces
    Ekspanderer tilde
    Ekspanderer params
    Substituerer kommando (subskall)
    Ekspanderer aritmetiske expr
    Substituerer prosess  (subskall)
    Splitter felt i ord vha IFS (word splitting)
    Ekspanderer filnavn
    Fjerner escape- og sitattegn
    Output: en kommandolinje (command structure)
  
  Utførelse
    Omdirigeringer
      Ekspanderer
      Utfører omdirigeringer
      Removes the redirection operators and their operands from the argument list.
    Tilordninger
      Ekspanderer RHS
      Utfører tilordninger
    Kommandosøk
    Invocation; utførelse
    Jobbkontroll
    Opphever omdirigeringer
  
  Output
    Eksponerer exit status i $?
      0    success
      1    no such file or directory
      2    syntax error e.g invalid option
      ...
      126  permission denied
      127  command not found 
      ...
      255  failure
     
