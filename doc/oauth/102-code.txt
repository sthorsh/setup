AUTHORIZATION CODE

Registrering
  Navn: APP_NAME
  Redirect URI: https://ws/callback

Akkreditiver
  Klient-ID: CLIENT_ID
  Klient-secret: CLIENT_SECRET
  
-----
Start
  Bruker kaller https://ws/index.js

---------------
Autorisasjon RQ
  https://azs/authorize?
    response_type=code&
    response_mode=query&
    client_id=CLIENT_ID&
    redirect_uri=https://ws/callback&
    scope=API&
    state=STATE

Autorisasjon
  AzS validerer client_id
  AzS validerer redirect_uri 
  Bruker autentiserer seg (login)
  Bruker autoriserer scope (samtykker)
  AzS genererer autorisasjonskode CODE

Autorisasjon RS                                        
  https://ws/callback?
    code=CODE&
    state=STATE

--------
Token RQ
  POST /token HTTP/1.1
    Host: azs
    Content-type: application/x-www-form-urlencoded
    ...
    grant_type=authorization_code&
    code=CODE&
    redirect_uri=https://ws/callback&
    client_id=CLIENT_ID&
    client_secret=CLIENT_SECRET

Token RS
  HTTP/1.1 200 OK
  Content-Type: application/json
  {
    access_token: JWT₁
    token_type: Bearer,
    expires_in: 3600,
    refresh_token: JWT₂
  }

------
API RQ
  https://rs/api
  Authorization: Bearer JWT₁

API RS
  Data JSON

----------------
Token refresh RQ
  POST /token HTTP/1.1
    Host: azs
    Content-type: application/x-www-form-urlencoded
    ...
    grant_type=refresh_token&
    refresh_token=JWT₂&
    client_id=CLIENT_ID&
    client_secret=CLIENT_SECRET

Token refresh RS
  HTTP/1.1 200 OK
  Content-Type: application/json
  {
    access_token: JWT₃
    token_type: Bearer,
    expires_in: 3600,
  }

