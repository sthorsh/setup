ZOOKEEPER

ZooKeeper
  En distribuert koordineringstjeneste
  Et distribuert hierarkisk filsystem
  Et distribuert system (DS) med tjenester for andre DS'er

Features
  Cluster mgmt
  Konfigurasjonstjenester
  Dataregister
  Distribuerte datastrukturer
  Failure detection
  Failure recovery
  Gruppemedlemskap
  Leader election (qourum)
  Locking service
  Metadata mgmt
  Navnetjenester
  Node mgmt
  Synkroniseringstjenester

Datakonsistensgarantier
  Atomisitet (A)
  Konsistent klient-view (C)
  Durabilitet ved skriving (D)
  Eventual consistency 
  Sekvensielle oppdateringer

Arkitektur
  Klienter
  Server (leder) med replikert db
  Servere (følgere) med replikerte dbs
  Bruk totalt 3, 5, 7 el 9 servere
  Sett quorum til et flertall dvs 2, 3, 4 el 5

Sesjon
  Klient connecter til server
  Server sender ack til klient
  Klient/server etablerer sesjon (session id)
  Klient leser data
  Klient skriver data
  Klient sender heartbeats (automatisk keepalive)
  Server dør
  Sesjon flyttes til en annen server (automatisk failover)
  Klient timer ut pga close el crash
  Server sletter sesjonen (ephemeral znode)

Filsystem
  Rot znode
  Barn znode
  Data znode ≤1MB
  Ephemeral znode
  Ephemeral sequential znode
  Persistent znode
  Persistent sequential znode

Operasjoner
  Lese: klient → server in-memory db
  Skrive: klient → server → leder → bc ensemble (quorum)
  
Watches
  Klient registrerer watch på znode
  Server notifiserer klient ved skrive-op
  Server notifiserer klient ved endring av znode's barn
  Server sletter watches når sesjon timer ut (ephemeral znode)
  
API
  connect
  create: skrive
  delete: skrive
  exists: lese
  getChildren: lese
  getData: lese
  setData: skrive
  getAcl: lese
  setAcl: skrive
  close
    
CLI
  addauth scheme auth
  close
  connect host:port
  create [-e] [-s] path data [acl] ✓
  delete path [version] ✓
  delquota [-n|-b] path
  get path [watch] ✓
  getAcl path
  history ✓
  listquota path
  ls path [watch] ✓
  ls2 path [watch]
  printwatches on|off
  quit ✓
  redo cmdno
  rmr path ✓
  set path data [version] ✓
  setAcl path acl
  setquota -n|-b val path
  stat path [watch] ✓
  sync path 
      
