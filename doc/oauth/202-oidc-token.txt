OIDC TOKEN

Registrering
  Navn: APP_NAME
  Redirect URI: https://spa/callback

Akkreditiver
  Klient-ID: CLIENT_ID
  
-----
Start
  Bruker kaller https://ws/index.js

---------------
Autorisasjon RQ
  https://azs/authorize?
    response_type=id_token token&
    response_mode=form_post&
    client_id=CLIENT_ID&
    redirect_uri=https://ws/callback&
    scope=openid profile email API&
    nonce=NONCE&
    state=STATE

Autorisasjon
  AzS validerer client_id
  AzS validerer redirect_uri 
  Bruker autentiserer seg (login)
  Bruker autoriserer scope (samtykker)

Autorisasjon RS                                        
  https://spa/callback#
    access_token: JWT₁&
    id_token: JWT₂&
    token_type: Bearer&
    expires_in: 3600&
    state=STATE
 
-------------------------
Klient validerer id_token
  exp: EPOCH
  iss: https://idp
  aud: CLIENT_ID
  nonce: NONCE
  at_hash: AT_HASH
  sub: USER_ID
  idp: IDP
  amr: pwd
  ...

------
API RQ
  https://idp/userinfo 
  Authorization: Bearer ACCESS_TOKEN

API RS
  {
    sub: 248289761001,
    name: John Doe,
    email: johndoe@example.com
  }

------
API RQ
  https://rs/api
  Authorization: Bearer ACCESS_TOKEN

API RS
  Data JSON

