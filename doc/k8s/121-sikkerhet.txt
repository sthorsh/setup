SIKKERHET

Klient
  Bruker
  Service account
  Scheduler
  Controller manager
  Kubelet
  Kube-proxy

API request
  Autentisering
  Autorisasjon
  Admission control
  Requestprosessering
  
Autentisering
  Basic HTTP
  Autentiseringstoken
  Klientsertifikat
  OIDC
  ...

Autentiseringstoken
  HTTP Authorization Header

Kientsertifikat
  Brukernavn: CN
  Gruppenavn: OU

---------------------------------------
Bruker
  Et menneske aksesserer apiserver e.g kubectl
  Apiserver autentiserer: User Account e.g admin
  API objekt: n/a
  Credentials defineres og lagres utenfor K8s:
    • passordfil
    • tokens
    • sertifikat
    • katalogtjeneste
  Brukernavn brukes ifm autorisasjon, adgangskontroll og logging
  En eller flere brukere kan organiseres i en eller flere grupper
  
Service Account (sa)
  Prosess i container i pod aksesserer apiserver
  Apiserver autentiserer: Service Account e.g default
  API objekt: ServiceAccount (namespaced)
  Credentials defineres og lagres i K8s (token)
  SA brukes for autentisering, autorisasjon, kryptering
  Hvert ns har en default sa (default)
  Hver pod refererer til en sa i samme ns e.g default
  Hver sa har en liste med secrets e.g default-token-6z6hs
  Hver sa secret har data med elementer ca.crt, namespace, token
! I container fs: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
! I container fs: /var/run/secrets/kubernetes.io/serviceaccount/namespace
! I container fs: /var/run/secrets/kubernetes.io/serviceaccount/token
  Ved opprettelse av en sa lager en controller en secret automatisk


Rq authz
  RBAC
    • definerer roller
    • binder users til roller
  Node
    • aksess til kubelet on nodes
  ABAC
    • basert på policies + attributter
  ...
  
