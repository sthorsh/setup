HELM

ARBEIDSFLYT

Definer k8s ressurser
    *.yaml
    ...
Chart
  Lag chart/name/
  Legg til Chart.yaml
  Legg til ressurrdefs: templates
    Legg evt til values
    Legg evt til avhengigheter: chart₁ dep chart₂
    ? Definer rekkefølge for startup reseourcedefs/objekter
  ...
    Lag umbrella chart
      Katalogstruktur
    ...
    Pakk chart
      Input: chart
      Output: chart archive (.tar)
    ...
    Install
      $ helm install RELEASE CHART
      Rekkefølge: secret før chart
  
    Update/patch
      $ helm upgrade RELEASE CHART
      old_chart; kubectl; new_chart
      → Helm3 sammenligner 3 manifest: old chart, new chart, live state (three-way merge patch)
      
    Rollback (update)
      $ helm rollback RELEASE
      new_chart; kubectl; old_chart
      → Helm3 sammenligner 3 manifest: old chart, new chart, live state (three-way merge patch)
  
    Uninstall
      $ helm uninstall RELEASE 
  
    Publisere
      Arkiv til repo
  
---------------------------
LAB
1. CHARTS/PAKKING

2. VERSJONERING
  Gruppe → pakke (→ arkiv)
  Install pakke → release <VERSJON>
  Revision: teller
  Versjon: semver ...

3. CUSTOMIZE/TEMPLATES
Customize chart for gjenbruk
  Templates
  Output: customizable chart

4. AVHENGIGHETER/DEPS
Chart deps
  Def chart₁ dep til chart₂ i e.g stable mongodb chart

5.2 DISTRIBUTE/GJENBRUKE
Gjenbruke chart
  Gjenbruke STABLE HELM CHARTS fra helm stable repo
  Cf /home/svein/.cache/helm/repository/

5.1 DISTRIBUTE/DELE
Publisere chart
  Til helm repo

