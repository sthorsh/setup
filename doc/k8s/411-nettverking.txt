NETTVERKING

Modell (for _pod_ nettverket)
  Hver pod i pod nettverket skal ha en "single un-NATed ip addr" ("the real ip address")
  Alle pods kan snakke med alle andre pods på alle noder (over L3 overlay network (ELLER L3 infrastruktur))
  Agenter (kubelet, kube-proxy) på en node kan snakke med alle pods på den noden

Topologi
  Pod nettverk: range iht pod-network-cidr e.g 192.168.0.0/16 (pod id addr) (calico)
  Cluster nettverk: service type clusterip, range iht service-clusterip param (?) (svc ip addr)
  Node nettverk: "the real network" i datasenteret eller skyen (node ip addr)

Patterns
  Ctr-til-ctr i pod: if lo, bruker namespaces (?)
  Pod-til-pod i node: if eth0 → L2 sw-bridge/tunnel-if, bruker pod "real" ip addr (calico: tunnel)
  Pod-til-pod mellom noder: if ? → overlay nettverk ELLER L3/L2 connectivity, bruker pod "real" ip addr
  Til-svc: if ? → kube-proxy, fra interne (clusterip) el eksterne klienter (nodeport)
  
CNI 3
  Definerer standardisering
  Implementerer standardisering

Cluster DNS 8
  ...
------------------------------------

Lab Nocentino
  A single un-NATed (static) IP address per pod
  Direct routing: configure infrastructure to support IP reachability between pods on nodes cf /etc/hosts

===================================

Forbindelser
  Lag 4: tcp port
  Lag 3: ip adresse
  Lag 2: mac adresse

Master TCP-porter
  2379-2380 → etcd
  8443 → API-server
  8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy → DNS-servers
  10250 → kubelet
  localhost:10251 → scheduler
  localhost:10252 → controller manager
  30000 → dashboard

Node TCP-porter
  10250 → kubelet
  30001-32767 → node port

===================================
POD NETTVERK(ING)

NODE NETTVERK(ING)

CLUSTER NETTVERK(ING)
-----------------------------------
CLUSTER DNS
===================================
SERVICES

Service typer
- ClusterIP
- NodePort
- LoadBalancer

Service discovery
- DNS: real pod/service IP → ?
- Env vars: real pod/service IP → ?
===================================
INGRESS
Arkitektur

Use cases
- TLS encryption
- Path based routing
- Name based virtual hosts














